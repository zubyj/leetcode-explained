<!DOCTYPE html>
<html>

<head>
    <title>Settings</title>
    <link rel="stylesheet" href="./popup.css">
    <!-- Preload theme handler script before anything else -->
    <script>
        // Check localStorage first for faster loading
        const isDark = localStorage.getItem('leetcode-explained-theme') === 'dark';
        
        // Set initial theme attribute
        document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
        
        // Add initial dark theme styles if needed
        if (isDark) {
            const style = document.createElement('style');
            style.id = 'preload-dark-theme';
            style.innerHTML = `
                html, body {
                    background-color: #202124 !important;
                    color: #e8eaed !important;
                }
                pre, code, .response-container {
                    background-color: #303134 !important;
                    color: #e8eaed !important;
                    border-color: #5f6368 !important;
                }
                a {
                    color: #8ab4f8 !important;
                }
            `;
            document.head.appendChild(style);
        }
    </script>
    <style>
        /* Prevent any visible transition on initial load */
        * {
            transition: none !important;
        }
    </style>
    <script type="module" src="../../dist/popup/settings.js"></script>
</head>

<body>
    <div class="navbar">
        <button id="open-home-btn" class="tab ">Home</button>
        <button id="open-settings-btn" class="tab active">Settings</button>
    </div>
    
    <div class="main-content settings-content">
        <div class="settings-container">
            <label for="font-size-select">Display Size</label>
            <select name="fontSize" id="font-size-select" class="material-button select settings-btn">
                <option value="12">Small</option>
                <option value="14">Medium</option>
                <option value="16">Large</option>
            </select>
            <button id="enable-dark-theme-btn" class="material-button settings-btn">
                <span id="theme-icon"></span>
                <span>Theme: </span><span id="theme-text">Dark</span>
            </button>
            <button id="show-company-tags-btn" class="material-button settings-btn">
                <span id="show-company-tags-icon"></span> Show Company Tags
            </button>
            <button id="show-examples-btn" class="material-button settings-btn">
                <span id="show-examples-icon"></span>Show Examples
            </button>
            <button id="show-difficulty-btn" class="material-button settings-btn">
                <span id="show-difficulty-icon"></span> Show Difficulty
            </button>
            <button id="show-rating-btn" class="material-button settings-btn">
                <span id="show-rating-icon"></span> Show Rating
            </button>
            
            <div id="review">
                Leave us a
                <a target="_blank"
                    href="https://chrome.google.com/webstore/detail/leetcode-explained/cofoinjfjcpgcjiinjhcpomcjoalijbe">
                    review
                </a>
            </div>
            <div id="review">
                View the
                <a target="_blank" href="https://github.com/zubyj/leetcode-explained">
                    source code
                </a>
            </div>
        </div>
    </div>
    
    <!-- Enable transitions after load -->
    <script>
        // Enable smooth transitions after initial rendering
        window.addEventListener('load', function() {
            // Short delay to ensure everything is rendered first
            setTimeout(function() {
                // Remove the inline style forcing no transitions
                const style = document.createElement('style');
                style.innerHTML = '* { transition: color 0.3s, background-color 0.3s, border-color 0.3s !important; }';
                document.head.appendChild(style);
            }, 100);
        });
    </script>
</body>

</html>